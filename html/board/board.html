<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.130/Build/Cesium/Cesium.js"></script>
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.130/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
  <style>
    html, body, #cesiumContainer {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
  </style>
</head>

<body>
  <div id="cesiumContainer"></div>

  <script type="module">
    Cesium.Ion.defaultAccessToken =
      "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI1OGIzZmQyZC03YjNiLTQzMjQtOWQxYS0xOTYxZWUyMTYzMjQiLCJpZCI6MzEzMjQxLCJpYXQiOjE3NTAyMjc2NDd9.G9X0WofFDt3mbp2L_WDzU__rcAVg0v3rpAliG1sgB9k";

    // åˆ›å»º Viewer
    const terrainProvider = await Cesium.CesiumTerrainProvider.fromIonAssetId(1, {
      requestVertexNormals: true,
      requestWaterMask: true,
    });

    const viewer = new Cesium.Viewer("cesiumContainer", {
      terrainProvider: terrainProvider
    });

    // åŠ è½½ Tileset
    const tileset = viewer.scene.primitives.add(
      await Cesium.Cesium3DTileset.fromUrl(
        "https://gl.hangzhoudk.com/modelfile/tileset.json"
      )
    );

    viewer.zoomTo(tileset);

    // ----------- ç»˜åˆ¶æ–‡å­—çœ‹æ¿çš„å‡½æ•° -------------
    function createBoardCanvas() {
    const canvas = document.createElement("canvas");
    canvas.width = 512;
    canvas.height = 256;
    const ctx = canvas.getContext("2d");

    // ğŸ”¹ åè½¬ Canvas Y è½´
    ctx.translate(0, canvas.height);
    ctx.scale(1, -1);

    // èƒŒæ™¯æ¸å˜
    const g = ctx.createLinearGradient(0, 0, 0, canvas.height);
    g.addColorStop(0, "rgba(0,150,255,0.9)");
    g.addColorStop(1, "rgba(0,100,255,0.7)");
    ctx.fillStyle = g;
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // æ–‡æœ¬
    ctx.fillStyle = "white";
    ctx.font = "bold 48px sans-serif";
    ctx.fillText("å²³è¥¿æ°´å‚", 40, 80);

    ctx.fillStyle = "#00eaff";
    ctx.font = "bold 60px sans-serif";
    ctx.fillText("è¿è¡Œæ­£å¸¸", 40, 170);

    return canvas;
}



    // -------- æ·»åŠ ç«–ç›´ Planeï¼ˆæ˜¾ç¤ºæ°´å‚ä¿¡æ¯ï¼‰ --------
    const position = Cesium.Cartesian3.fromDegrees(119.998060, 30.282778, 300);

    const planeEntity = viewer.entities.add({
  name: "WaterPlantBoard",
  position: position,

  plane: {
    plane: new Cesium.Plane(
    new Cesium.Cartesian3(0, -1, 0),  // æ­£é¢æœç›¸æœºï¼ˆå—è¾¹ï¼‰
    0.0
  ),
    dimensions: new Cesium.Cartesian2(300.0, 150.0),

    material: new Cesium.ImageMaterialProperty({
      image: createBoardCanvas("æ°´å‚", "è¿è¡Œæ­£å¸¸"),
      repeat: new Cesium.Cartesian2(1, -1),   // â­ åè½¬ Y åæ ‡
    }),

    outline: true,
    outlineColor: Cesium.Color.WHITE
  }
});

    
    viewer.flyTo(planeEntity);
  </script>
</body>
</html>
